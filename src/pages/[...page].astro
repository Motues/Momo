---
import MainPageLayout from '@layouts/MainPageLayout.astro';
import Cover from '@components/Cover.astro';
import PostPage from '@components/PostPage.astro';
import Navi from '@components/control/Navi.astro';
import BackTop from '@components/control/BackTop.astro';

import { getBlogEntrySort } from '@utils/content-utils'
import { siteConfig } from '@/config';

import type { GetStaticPaths } from 'astro';

const pageTitle = `${siteConfig.title} - ${siteConfig.subTitle}`;
const coverEnabled = siteConfig.cover.enabled;

export const getStaticPaths = (async ({ paginate }) => {
  const blogEntries = await getBlogEntrySort();
  return paginate(blogEntries, { pageSize: siteConfig.pageSize})
}) satisfies GetStaticPaths

// 所有分页数据都在 "page" 参数中传递
const { page } = Astro.props;


---

<MainPageLayout title={pageTitle}>
    {coverEnabled && <Cover title={siteConfig.cover.title} subTitle={siteConfig.cover.subTitle} />}
    <PostPage page={page} />
    <Navi page={page} />
    <BackTop />
</MainPageLayout>