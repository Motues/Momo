---
import "@styles/global.css"
import ImageModule from "./misc/ImageModule.astro";

import { getRelativeLocaleUrl } from '@utils/url-utils';

import { i18n } from "astro:config/client";
import i18nit from '@i18n/translation'

interface Props {
    title: string;
    description: string;
    image: string;
    pubDate: string;
    url: string;
}

const { title, description, image, pubDate, url } = Astro.props;

const { locale = i18n!.defaultLocale } = Astro.params;

const currentLang = i18n.locales.includes(locale) ? locale : i18n!.defaultLocale;
const t = i18nit(currentLang);


const pageUrl = getRelativeLocaleUrl(currentLang, "/blog/" + url);
---

<a href={pageUrl} class="block min-w-0 w-full max-w-[var(--page-width)] mx-auto my-6  rounded-xl shadow border border-[var(--button-border-color)] overflow-hidden transition-all duration-300 hover:-translate-y-1">
    {image && (
        <div class="cover h-60 overflow-hidden">
            <ImageModule src={image} alt={title} class="w-full h-full object-cover"/>
        </div>
    )}
    <div class="content p-6">
        <h2 class="title text-xl font-semibold text-[var(--text-color)] mb-3">{title}</h2>
        <p class="description text-[var(--text-color)]/40 leading-relaxed">{description}</p>
        <p class="pubdate text-sm text-[var(--text-color)]/70 mt-4">{pubDate}</p>
    </div>
</a>